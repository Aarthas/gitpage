webpackJsonp([4],{132:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"weui-cell",class:e.classObject,on:{click:e.onClick}},[i("div",{staticClass:"weui-cell__bd"},[i("span",{staticStyle:{"font-size":"15px"}},[e._v(e._s(e.title))])]),e._v(" "),i("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":"15px"}},[e._v(e._s(e.value))])])},staticRenderFns:[]}},161:function(e,t){},18:function(e,t,i){i(51);var o=i(0)(i(65),i(45),null,null);e.exports=o.exports},190:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o;t.default={name:"xcell",data:function(){return{}},props:{title:String,value:[String,Number,Array],isLink:Boolean,link:{type:[String,Object]}},computed:{classObject:function(){return{"weui-cell_access":this.isLink}}},created:function(){o=this,console.log("created")},mounted:function(){console.log("mounted")},activated:function(){console.log("activated")},deactivated:function(){console.log("deactivated")},destroyed:function(){console.log("destroyed")},methods:{onClick:function(){null!=this.link&&this.$router.push(this.link)}}}},22:function(e,t,i){i(54);var o=i(0)(i(64),i(48),null,null);e.exports=o.exports},231:function(e,t,i){i(517);var o=i(0)(i(618),i(432),null,null);e.exports=o.exports},257:function(e,t,i){i(465);var o=i(0)(i(641),i(376),null,null);e.exports=o.exports},325:function(e,t,i){i(497);var o=i(0)(i(630),i(411),null,null);e.exports=o.exports},326:function(e,t,i){i(490);var o=i(0)(i(631),i(403),null,null);e.exports=o.exports},327:function(e,t,i){i(453);var o=i(0)(i(632),i(363),null,null);e.exports=o.exports},363:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("group",{attrs:{title:"请选择购买门店"}},[i("YSelect",{attrs:{propsData:{title:"区域与门店",require:!1,placeholder:"",list:e.areaList}},model:{value:e.p_areaindex,callback:function(t){e.p_areaindex=t},expression:"p_areaindex"}}),e._v(" "),i("YSelect",{directives:[{name:"show",rawName:"v-show",value:e.p_areaindex>0,expression:"p_areaindex>0"}],attrs:{propsData:{placeholder:"请选择门店",require:!1,list:e.shopList}},model:{value:e.p_shopindex,callback:function(t){e.p_shopindex=t},expression:"p_shopindex"}}),e._v(" "),i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.p_shopindex>-1,expression:"p_shopindex>-1"}],staticStyle:{"font-size":"14px","margin-left":"1em","margin-bottom":"12px"}},[e._v(e._s(e.info))])])],1)],1)},staticRenderFns:[]}},376:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("group",{attrs:{title:"请选择购买平台"}},[i("YSelect",{attrs:{propsData:{title:"购买平台",require:!0,list:e.complaintPreData.platforms}},model:{value:e.p_platform,callback:function(t){e.p_platform=t},expression:"p_platform"}})],1),e._v(" "),i("group",{attrs:{title:"请选择投诉类型"}},[i("YSelect",{attrs:{propsData:{title:"投诉类型",require:!0,list:e.complaintPreData.types}},model:{value:e.p_type,callback:function(t){e.p_type=t},expression:"p_type"}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:10007!=e.p_platform,expression:"p_platform != 10007"}]},[i("shop_pick",{ref:"shop_pick",attrs:{item:this.complaintPreData.shopsList}})],1),e._v(" "),i("group",{attrs:{title:"订单编号"}},[i("YInput",{attrs:{item:{placeholder:"请输入",istype:"number"}},model:{value:e.p_orderNum,callback:function(t){e.p_orderNum=t},expression:"p_orderNum"}})],1),e._v(" "),i("group",{attrs:{title:"投诉的内容"}},[i("YTextArea",{attrs:{item:{placeholder:"请输入您要投诉的内容(必输)"}},model:{value:e.p_content,callback:function(t){e.p_content=t},expression:"p_content"}})],1),e._v(" "),i("div",{staticClass:"weui-cells weui-cells_form"},[i("div",{staticClass:"weui-cell"},[i("div",{staticClass:"weui-cell__bd"},[i("div",{staticClass:"weui-uploader"},[i("div",{staticClass:"weui-uploader__hd"},[i("p",{staticClass:"weui-uploader__title"},[e._v("请上传小票或商品照片")]),e._v(" "),i("div",{staticClass:"weui-uploader__info"},[e._v(e._s(e.previewimages.length)+"/4")])]),e._v(" "),i("div",{staticClass:"weui-uploader__bd"},[i("ul",{staticClass:"weui-uploader__files",attrs:{id:"uploaderFiles"}},e._l(e.previewimages,function(t,o){return i("img",{staticClass:"weui-uploader__file",attrs:{src:t},on:{click:function(t){e.showPreview(o)}}})})),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.previewimages.length<4,expression:"previewimages.length < 4"}],staticClass:"weui-uploader__input-box"},[i("span",{staticClass:"weui-uploader__input",on:{click:e.chooseImage}})])])])])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.previewimages.length>0,expression:"previewimages.length>0"}],staticStyle:{display:"flex","justify-content":"flex-start","margin-left":"30px","margin-right":"10px","padding-bottom":"10px"}},[i("div",{staticStyle:{"margin-right":"54px"}},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.previewimages.length>0,expression:"previewimages.length>0"}],staticClass:"weui-icon-cancel ",staticStyle:{"font-size":"26px"},on:{click:function(t){e.delImage(0)}}})]),e._v(" "),i("div",{staticStyle:{"margin-right":"54px"}},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.previewimages.length>1,expression:"previewimages.length>1"}],staticClass:"weui-icon-cancel ",staticStyle:{"font-size":"26px"},on:{click:function(t){e.delImage(1)}}})]),e._v(" "),i("div",{staticStyle:{"margin-right":"54px"}},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.previewimages.length>2,expression:"previewimages.length>2"}],staticClass:"weui-icon-cancel ",staticStyle:{"font-size":"26px"},on:{click:function(t){e.delImage(2)}}})]),e._v(" "),i("div",[i("i",{directives:[{name:"show",rawName:"v-show",value:e.previewimages.length>3,expression:"previewimages.length>3"}],staticClass:"weui-icon-cancel ",staticStyle:{"font-size":"26px"},on:{click:function(t){e.delImage(3)}}})])])]),e._v(" "),i("group",{attrs:{title:""}},[i("YInput",{attrs:{item:{placeholder:"联系人"}},model:{value:e.p_contact,callback:function(t){e.p_contact=t},expression:"p_contact"}}),e._v(" "),i("YInput",{attrs:{item:{placeholder:"联系电话(必输)",istype:"number"}},model:{value:e.p_mobile,callback:function(t){e.p_mobile=t},expression:"p_mobile"}})],1),e._v(" "),i("div",{staticStyle:{margin:"30px  12px"}},[i("x-button",{attrs:{type:"primary",disabled:e.submitDisabled},nativeOn:{click:function(t){e.submit(t)}}},[e._v(" 提交")])],1)],1)},staticRenderFns:[]}},39:function(e,t,i){"use strict";function o(e,t,i){if("function"==typeof Array.prototype.find)return e.find(t,i);i=i||this;var o,n=e.length;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(o=0;o<n;o++)if(t.call(i,e[o],o,e))return e[o]}e.exports=o},403:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"weui-cell"},[i("div",{staticClass:"weui-cell__bd"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"weui-textarea",attrs:{placeholder:e.item.placeholder,rows:"4"},domProps:{value:e.currentValue},on:{input:function(t){t.target.composing||(e.currentValue=t.target.value)}}})])])},staticRenderFns:[]}},411:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{height:"48px",display:"flex","flex-direction":"row","align-items":"center"}},[i("span",{staticStyle:{height:"30px",width:"6px","background-color":"#0bb20c","margin-left":"0px"}}),e._v(" "),i("span",{staticStyle:{"font-size":"15px","margin-left":"10px",color:"#0bb20c"}},[e._v(e._s(e.title))])])},staticRenderFns:[]}},432:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vux-selector weui-cell",class:{"weui-cell_select":!e.readonly,"weui-cell_select-after":e.title}},[e.title?i("div",{staticClass:"weui-cell__hd"},[i("label",{staticClass:"weui-label",class:e.labelClass,style:{width:e.$parent.labelWidth,textAlign:e.$parent.labelAlign,marginRight:e.$parent.labelMarginRight},attrs:{for:"vux-selector-"+e.uuid}},[e._v(e._s(e.title))])]):e._e(),e._v(" "),e.readonly?i("div",{staticClass:"weui-cell__ft vux-selector-readonly"},[e._v("\n    "+e._s(e._f("findByKey")(e.value,e.processOptions))+"\n  ")]):i("div",{staticClass:"weui-cell__bd"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"weui-select",staticStyle:{color:"red"},style:{direction:e.direction,color:e.color},attrs:{id:"vux-selector-"+e.uuid,ddd:e.color,name:e.name},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.currentValue=t.target.multiple?i:i[0]}}},[e.showPlaceholder?i("option",{attrs:{value:""},domProps:{selected:void 0===e.value&&e.placeholder}},[e._v(e._s(e.placeholder))]):e._e(),e._v(" "),e.fixIos?i("option",{attrs:{disabled:""}}):e._e(),e._v(" "),e._l(e.processOptions,function(t){return i("option",{domProps:{value:t.key}},[e._v(e._s(t.value))])})],2)])])},staticRenderFns:[]}},45:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"weui-cell weui-cell_select weui-cell_select-after"},[e.propsData.title?i("div",{staticClass:"weui-cell__hd"},[i("label",{staticClass:"weui-label"},[e.propsData.require?i("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e(),e._v(e._s(e.propsData.title)+" ")])]):e._e(),e._v(" "),i("div",{staticClass:"weui-cell__bd"},[i("select",{ref:"select",staticClass:"weui-select",style:{color:e.value>-1?"#333333":"rgb(169, 169, 169)"},attrs:{name:"select2"},domProps:{value:e.value},on:{input:function(t){e.updateValue(t.target.value)}}},[i("option",{attrs:{value:"-1"}},[e._v(e._s(e.propsData.placeholder||"请选择"))]),e._v(" "),e._l(e.propsData.list,function(t){return i("option",{key:t.value,attrs:{title:t.name,"is-link":""},domProps:{value:t.value}},[e._v(e._s(t.name))])})],2)])])},staticRenderFns:[]}},453:function(e,t){},465:function(e,t){},48:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"weui-cell"},[i("div",{staticClass:"weui-cell__hd"},[e.item.title?i("span",{staticClass:"weui-label",domProps:{innerHTML:e._s(e.item.title)}}):e._e()]),e._v(" "),i("div",{staticClass:"weui-cell__bd"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],ref:"input",staticClass:"weui-input",attrs:{type:"text",placeholder:e.item.placeholder},domProps:{value:e.currentValue},on:{input:function(t){t.target.composing||(e.currentValue=t.target.value)}}})])])},staticRenderFns:[]}},490:function(e,t){},497:function(e,t){},51:function(e,t){},517:function(e,t){},54:function(e,t){},590:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=i(2),a=o(n),s=i(257),l=o(s);new a.default({render:function(e){return e(l.default)}}).$mount("#app")},618:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),a=o(n),s=i(39),l=o(s),r=i(700),c=o(r),u=function(e,t){var i=(0,l.default)(t,function(t){return t.key===e});return i?i.value:e};t.default={name:"selector",mixins:[c.default],created:function(){void 0!==this.value&&(this.currentValue=this.value)},computed:{fixIos:function(){return!this.placeholder&&(0,a.default)("undefined"===this.value||""===this.value)&&this.isIOS&&this.title},color:function(){return this.showPlaceholder?"#A9A9A9":""},processOptions:function(){return this.options.length&&{}.hasOwnProperty.call(this.options[0],"key")?this.options:this.options.map(function(e){return{key:e,value:e}})},showPlaceholder:function(){return!(void 0!==this.value&&""!==this.value||!this.placeholder)},labelClass:function(){return{"vux-cell-justify":"justify"===this.$parent.labelAlign||"justify"===this.$parent.$parent.labelAlign}}},filters:{findByKey:u},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e),this.$emit("on-change",e)}},props:{title:String,direction:String,options:{type:Array,required:!0},name:String,placeholder:String,readonly:Boolean,value:[Boolean,String,Number,Object]},data:function(){return{currentValue:"",isIOS:/iPad|iPhone|iPod/.test(window.navigator.userAgent)}}}},630:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o;t.default={data:function(){return{}},props:{title:String},computed:{},created:function(){o=this,console.log("created")},mounted:function(){console.log("mounted")},activated:function(){console.log("activated")},deactivated:function(){console.log("deactivated")},destroyed:function(){console.log("destroyed")},methods:{}}},631:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o;t.default={name:"y-textarea",data:function(){return{currentValue:""}},props:{item:Object,title:String,value:[String,Number,Array],isLink:Boolean,link:{type:[String,Object]}},watch:{currentValue:function(e){this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue)}},computed:{classObject:function(){return{"weui-cell_access":this.isLink}}},created:function(){o=this,console.log("created"),this.currentValue=this.value},mounted:function(){console.log("mounted")},activated:function(){console.log("activated")},deactivated:function(){console.log("deactivated")},destroyed:function(){console.log("destroyed")},methods:{onClick:function(){null!=this.link&&this.$router.push(this.link)}}}},632:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),a=(o(n),i(4)),s=o(a),l=i(6),r=(o(l),i(231)),c=(o(r),i(18)),u=o(c);t.default={components:{Group:s.default,YSelect:u.default},data:function(){return{p_shopindex:-1,p_areaindex:-1}},props:{item:Array},computed:{areaList:function(){var e=[],t=this.item;if(t)for(var i=0;i<t.length;i++){var o=t[i];e.push({name:o.area,value:i})}return e},shopList:function(){console.log("shopList");var e=[],t=this.item;if(t&&t[this.p_areaindex]){var i=t[this.p_areaindex].shops;for(var o in i){var n=i[o];e.push({name:n.shopName,value:o})}}return e},info:function(){console.log("info");var e=this.item;if(e&&e[this.p_areaindex]){var t=e[this.p_areaindex].shops;if(t&&t[this.p_shopindex]){return t[this.p_shopindex].address}}return""}},watch:{p_areaindex:function(e,t){console.log("p_areaindex  new: %s, old: %s",e,t),e!=t&&(this.p_shopindex=-1)},p_shopindex:function(e,t){console.log("p_shopindex  new: %s, old: %s",e,t)}},methods:{}}},64:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o;t.default={name:"y-input",data:function(){return{currentValue:""}},props:{item:Object,value:{default:""}},watch:{currentValue:function(e){var t=e.trim();"number"==this.item.istype&&(t=t.replace(/[^\d]/g,"")),t!==e&&(console.log("watch currentValue222"),this.currentValue=t),this.$emit("input",t)},value:function(e){this.currentValue=this.value}},computed:{classObject:function(){return{"weui-cell_access":this.isLink}}},created:function(){o=this,this.currentValue=this.value,console.log("created")},mounted:function(){console.log("mounted")},activated:function(){console.log("activated")},deactivated:function(){console.log("deactivated")},destroyed:function(){console.log("destroyed")},methods:{onClick:function(){null!=this.link&&this.$router.push(this.link)}}}},641:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(7),a=(o(n),i(3)),s=o(a),l=i(4),r=o(l),c=i(6),u=o(c),p=i(231),d=o(p),f=i(95),v=o(f),m=i(325),_=o(m),h=i(326),g=o(h),w=i(22),x=o(w),b=i(18),y=o(b),C=i(327),k=o(C),S=i(1),I=o(S),P=i(77),$=o(P);console.log("app start");var V;t.default={components:{XButton:s.default,Group:r.default,Cell:u.default,Selector:d.default,xcell:v.default,cellhead:_.default,YTextArea:g.default,YInput:x.default,YSelect:y.default,shop_pick:k.default},data:function(){return{complaintPreData:{},showShops:!1,p_orderNum:"",p_platform:-1,p_type:-1,p_content:"",p_contact:"",p_mobile:"",submitDisabled:!1,previewimages:[]}},created:function(){V=this},mounted:function(){console.log("getComplaintPreData"),I.default.axios.axios({url:"complaint/getComplaintPreData",success:function(e){V.complaintPreData=e.getData()}}),$.default.get("http://weixin.sanjiang.com/weichat-csr-web/weixin/jsconfig?url="+encodeURIComponent(window.location.href)).then(function(e){console.log(e);var t=e.data;if(!t.success)return void alert(t.errmsg);t.data.debug=!1,t.data.jsApiList=["chooseImage","uploadImage","showPreview","getLocalImgData"],wx.config(t.data)},function(e){console.log("resp="+e)}),wx.ready(function(){wx.hideOptionMenu(),console.log("ready")}),wx.error(function(e){console.log("error")})},methods:{delImage:function(e){console.log(e),V.previewimages.splice(e,1)},showPreview:function(e){wx.previewImage({current:V.previewimages[e],urls:V.previewimages})},submit:function(){if(console.log("submit"),V.submitDisabled=!0,setTimeout(function(){V.submitDisabled=!1},1500),console.log("submit"),console.log("submit p_platform = "+V.p_platform),console.log("submit p_type = "+V.p_type),console.log("submit p_platform = "+V.p_platform),console.log("submit p_type = "+V.p_type),console.log("submit p_areaindex"+V.$refs.shop_pick.p_areaindex),console.log("submit p_shopindex"+V.$refs.shop_pick.p_shopindex),console.log("submit p_orderNum ="+V.p_orderNum),console.log("submit p_content ="+V.p_content),console.log("submit  p_contact = "+V.p_contact),console.log("submit   p_mobile ="+V.p_mobile),console.log("submit   previewimages ="+V.previewimages),console.log("submit   code ="+I.default.Utils.getQueryString("code")),V.p_platform<=0)return void I.default.uiutil.showtoast(V,"请选择平台");if(V.p_type<=0)return void I.default.uiutil.showtoast(V,"请选择投诉类型");if(null==V.p_content||0==V.p_content.length)return void I.default.uiutil.showtoast(V,"请输入投诉的内容");if(null==V.p_mobile||0==V.p_mobile.length)return void I.default.uiutil.showtoast(V,"请输入联系电话");var e=void 0;if(e=V.$refs.shop_pick.p_areaindex>0&&V.$refs.shop_pick.p_shopindex>=0?V.complaintPreData.shopsList[V.$refs.shop_pick.p_areaindex].shops[V.$refs.shop_pick.p_shopindex].shopId:null,console.log("submit shop ="+e),V.previewimages.length>0){I.default.vux.showLoad(V,"正在提交");var t=[];V.previewimages.forEach(function(e,i,o){t.push(e)});var i=[];V.syncUploadImage(t,i,function(t){console.log("aaa"),console.log(t);var i={platform:V.p_platform,shopId:e,orderId:V.p_orderNum,complainType:V.p_type,complainContent:V.p_content,contact:V.p_contact,mobile:V.p_mobile,serverIds:t,wxcode:I.default.Utils.getQueryString("code")};V.addComplaintFromWx(i)})}else{I.default.vux.showLoad(V,"正在提交");var o={platform:V.p_platform,shopId:e,orderId:V.p_orderNum,complainType:V.p_type,complainContent:V.p_content,contact:V.p_contact,mobile:V.p_mobile,serverIds:[],wxcode:I.default.Utils.getQueryString("code")};V.addComplaintFromWx(o)}},addComplaintFromWx:function(e){I.default.axios.axios({method:"post",url:"complaint/addComplaintFromWx",data:e,success:function(e){window.location.replace("./result.html")},onerrcode:function(e){V.$vux.toast.show({text:e.getMessage(),type:"text",width:"19em"})},onAfert:function(){I.default.vux.hideLoad(V)}})},syncUploadImage:function(e,t,i){var o=e.pop();wx.uploadImage({localId:o,isShowProgressTips:1,success:function(o){var n=o.serverId;t.push(n),console.log("serverId1 = "+n),console.log("serverIds 1= "+t),e.length>0?V.syncUploadImage(e,t,i):i(t)}})},chooseImage:function(){console.log("chooseIamage"),wx.chooseImage({count:4-V.previewimages.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){e.localIds.forEach(function(e,t,i){V.previewimages.push(e)})}})}}}},65:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o;t.default={data:function(){return{}},props:{propsData:Object,value:{default:[]}},computed:{showPlaceholder:function(){return!!(this.placeholder&&propsData.list&&propsData.list.length>0)}},created:function(){o=this,console.log("created")},mounted:function(){console.log("mounted")},activated:function(){console.log("activated")},deactivated:function(){console.log("deactivated")},destroyed:function(){console.log("destroyed")},methods:{updateValue:function(e){this.$emit("input",e)}}}},700:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={created:function(){this.uuid=Math.random().toString(36).substring(3,8)}}},95:function(e,t,i){i(161);var o=i(0)(i(190),i(132),null,null);e.exports=o.exports}},[590]);